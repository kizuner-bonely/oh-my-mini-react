<mxfile host="65bd71144e">
    <diagram id="eroiUfCXlei6Lb3GokV5" name="Page-1">
        <mxGraphModel dx="1452" dy="1045" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="2" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="40" y="70" width="470" height="630" as="geometry"/>
                </mxCell>
                <mxCell id="3" value="&lt;font style=&quot;font-size: 24px&quot; color=&quot;#ff0000&quot;&gt;react-dom&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="67.5" y="80" width="205" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="4" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=18;fontColor=#FF0000;" edge="1" parent="1" source="5" target="7">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="5" value="&lt;font style=&quot;font-size: 18px&quot;&gt;createRoot()&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=24;" vertex="1" parent="1">
                    <mxGeometry x="67.5" y="140" width="212.5" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="6" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=18;fontColor=#FF0000;" edge="1" parent="1" source="7" target="9">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="7" value="ReactDOMRoot" style="ellipse;whiteSpace=wrap;html=1;fontSize=18;" vertex="1" parent="1">
                    <mxGeometry x="78.75" y="230" width="190" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="8" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;fontSize=18;fontColor=#FF0000;" edge="1" parent="1" source="9" target="10">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="&lt;font style=&quot;font-size: 18px&quot;&gt;ReactDOMRoot.render()&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=24;" vertex="1" parent="1">
                    <mxGeometry x="67.5" y="340" width="212.5" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="10" value="" style="rounded=1;whiteSpace=wrap;html=1;fontSize=18;fontColor=#FF0000;" vertex="1" parent="1">
                    <mxGeometry x="67.5" y="430" width="412.5" height="240" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="&lt;font color=&quot;#ffffff&quot; style=&quot;font-size: 24px&quot;&gt;updateContainer()&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontColor=#FF0000;" vertex="1" parent="1">
                    <mxGeometry x="90" y="450" width="190" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="12" value="&lt;ol&gt;&lt;li&gt;根据传入 element ( &amp;lt;App /&amp;gt; ) 生成 fiber，其父节点是项目根元素生成的 fiber ( document.getElementById('root') )&lt;/li&gt;&lt;li&gt;将 &amp;lt;App /&amp;gt; 挂载到根元素上 ( document.getElementById('root') )&lt;/li&gt;&lt;/ol&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontColor=#FFFFFF;" vertex="1" parent="1">
                    <mxGeometry x="78.75" y="500" width="371.25" height="170" as="geometry"/>
                </mxCell>
                <mxCell id="13" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="630" y="70" width="1000" height="750" as="geometry"/>
                </mxCell>
                <mxCell id="14" value="&lt;font style=&quot;font-size: 36px&quot; color=&quot;#ff0000&quot;&gt;react&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="690" y="100" width="130" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="15" value="" style="rounded=1;whiteSpace=wrap;html=1;fontSize=24;" vertex="1" parent="1">
                    <mxGeometry x="700" y="290" width="330" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="16" value="scheduleUpdateOnFiber" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontColor=#FFFFFF;" vertex="1" parent="1">
                    <mxGeometry x="715" y="310" width="300" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="" style="endArrow=classic;html=1;fontSize=24;fontColor=#FFFFFF;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" target="15">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="400" y="637" as="sourcePoint"/>
                        <mxPoint x="450" y="600" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="18" value="wip: 当前遍历的 fiber 指针" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontColor=#FFFFFF;" vertex="1" parent="1">
                    <mxGeometry x="750" y="150" width="295" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="19" value="wipRoot: 发起当前更新遍历的 fiber 节点" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontColor=#FFFFFF;" vertex="1" parent="1">
                    <mxGeometry x="750" y="200" width="450" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="20" value="&lt;span style=&quot;font-size: 24px&quot;&gt;将 wip 和 wipRoot 指向传入的 fiber 节点&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=36;fontColor=#FFFFFF;" vertex="1" parent="1">
                    <mxGeometry x="720" y="380" width="285" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="39" style="edgeStyle=none;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;fontSize=24;" edge="1" parent="1" source="26">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="600" y="760" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="26" value="更新当前 wip 并得到下一个 wip; 提交当前 fiber 到 DOM 节点上" style="swimlane;fontSize=18;fontColor=#FFFFFF;" vertex="1" parent="1">
                    <mxGeometry x="1070" y="290" width="535" height="460" as="geometry"/>
                </mxCell>
                <mxCell id="27" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=18;fontColor=#FFFFFF;" edge="1" parent="26" source="28" target="30">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="28" value="performUnitOfWork()" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontColor=#FFFFFF;" vertex="1" parent="26">
                    <mxGeometry x="15" y="60" width="255" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="29" value="&lt;ol&gt;&lt;li&gt;updateXXXComponent()&lt;/li&gt;&lt;li&gt;wip = xxx&lt;/li&gt;&lt;/ol&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=18;fontColor=#FFFFFF;align=left;" vertex="1" parent="26">
                    <mxGeometry x="270" y="45" width="240" height="95" as="geometry"/>
                </mxCell>
                <mxCell id="30" value="commitRoot()" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontColor=#FFFFFF;" vertex="1" parent="26">
                    <mxGeometry x="15" y="190" width="255" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="31" value="&lt;ol&gt;&lt;li&gt;提交自己&lt;/li&gt;&lt;li&gt;提交 wip 子节点&lt;br&gt;commitWork(wip.child)&lt;/li&gt;&lt;li&gt;提交 wip 兄弟节点&lt;br&gt;commitWork(wip.sibling)&lt;/li&gt;&lt;/ol&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=18;fontColor=#FFFFFF;align=left;" vertex="1" parent="26">
                    <mxGeometry x="255" y="170" width="265" height="250" as="geometry"/>
                </mxCell>
                <mxCell id="32" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="630" y="860" width="1000" height="750" as="geometry"/>
                </mxCell>
                <mxCell id="33" value="&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;font-size: 36px&quot;&gt;scheduler&lt;/span&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="690" y="890" width="210" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="34" value="" style="rounded=1;whiteSpace=wrap;html=1;fontSize=24;" vertex="1" parent="1">
                    <mxGeometry x="705" y="980" width="535" height="330" as="geometry"/>
                </mxCell>
                <mxCell id="35" value="schedulerCallback" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontColor=#FFFFFF;" vertex="1" parent="1">
                    <mxGeometry x="720" y="1000" width="240" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="36" value="" style="curved=1;endArrow=classic;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="15" target="34">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="430" y="1160" as="sourcePoint"/>
                        <mxPoint x="590" y="1320" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="530" y="590"/>
                            <mxPoint x="550" y="970"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="37" value="&lt;font style=&quot;font-size: 24px&quot;&gt;workLoop&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="36">
                    <mxGeometry x="0.0392" y="1" relative="1" as="geometry">
                        <mxPoint y="1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="40" value="&lt;ol&gt;&lt;li&gt;&lt;font style=&quot;font-size: 24px&quot;&gt;根据传入函数 ( 初始化是 workLoop ) 创建任务池&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 24px&quot;&gt;请求调度 ( requestHostCallback )&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=18;fontColor=#FFFFFF;align=left;" vertex="1" parent="1">
                    <mxGeometry x="735" y="1060" width="475" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="41" value="初始化任务队列和 MessageChannel" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;" vertex="1" parent="1">
                    <mxGeometry x="760" y="1350" width="400" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="42" value="监听通道接收到信息时执行任务队列" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;" vertex="1" parent="1">
                    <mxGeometry x="760" y="1490" width="400" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="44" value="" style="shape=flexArrow;endArrow=classic;html=1;fontSize=24;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="41">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="920" y="1750" as="sourcePoint"/>
                        <mxPoint x="960" y="1500" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="45" value="" style="curved=1;endArrow=classic;html=1;fontSize=24;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="40" target="42">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="1370" y="1250" as="sourcePoint"/>
                        <mxPoint x="1420" y="1200" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1330" y="1250"/>
                            <mxPoint x="1360" y="1450"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="46" value="&lt;font style=&quot;font-size: 36px&quot;&gt;port.postMessage(null)&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=24;" vertex="1" connectable="0" parent="45">
                    <mxGeometry x="0.1153" y="-2" relative="1" as="geometry">
                        <mxPoint x="73" y="-38" as="offset"/>
                    </mxGeometry>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>